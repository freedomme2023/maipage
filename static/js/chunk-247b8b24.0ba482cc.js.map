{"version":3,"sources":["webpack:///./src/components/WalletContract.vue","webpack:///./src/components/WalletContract.vue?c199","webpack:///./src/views/pledge/index.vue","webpack:///./src/views/pledge/index.vue?612c","webpack:///./src/views/pledge/index.vue?ee46"],"names":["class","address","substring","initWallet","$t","setup","store","data","state","accounts","web3","provider","balance","initWeb3","getBalance","USDQContract","eth","Contract","config","USDQAddress","methods","balanceOf","call","result","dividedBy","toFixed","val","refData","__exports__","render","$router","push","type","replace","name","LPInfo","balances","tokenDecimals","tokenBalance","placeholder","amount","suffix","append","block","round","disabled","loading","approve","toStake","components","WalletContract","route","t","BigNumber","params","tokenAddress","token","LPStakeContract","tokenContract","initContract","LPStake","initData","getInfo","getAllowance","allowance","tokenAllowance","console","log","send","from","then","catch","decimals","tokenBalanceDecimals","Math","pow","userInfo","lte","gt","error","multipliedBy","stake","estimateGas","gas","err"],"mappings":"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","file":"static/js/chunk-247b8b24.0ba482cc.js","sourcesContent":["<template>\r\n  <div class=\"header-between flex-item flex-end\">\r\n    <!-- <div class=\"coin-box\" v-if=\"address\">{{balance || '--'}}USDT</div> -->\r\n    <div class=\"wallet-box ml\" v-if=\"address\">\r\n      {{\r\n        address.substring(0, 6) +\r\n          \"...\" +\r\n          address.substring(address.length - 4, address.length)\r\n      }}\r\n    </div>\r\n    <div class=\"wallet-box ml btn text-ellipsis\" v-else @click=\"initWallet\">\r\n      {{ $t(\"鏈接錢包\") }}\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { reactive, toRefs, computed, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport web3Data from \"@/utils/initWeb3\";\r\nimport tokenAbi from \"@/utils/abi\";\r\nimport { config } from \"@/utils/config\";\r\nimport BigNumber from \"bignumber.js\";\r\nexport default {\r\n  setup() {\r\n    const store = useStore();\r\n    const data = reactive({\r\n      address: computed(() => store.state.accounts[0]),\r\n      web3: computed(() => store.state.provider),\r\n      balance: \"\",\r\n      initWallet: () => {\r\n        if (!data.address) {\r\n          web3Data.initWeb3();\r\n        }\r\n      },\r\n      getBalance: async () => {\r\n        let USDQContract = new data.web3.eth.Contract(\r\n          tokenAbi,\r\n          config.USDQAddress\r\n        );\r\n        let result = await USDQContract.methods.balanceOf(data.address).call();\r\n        data.balance = new BigNumber(result).dividedBy(10 ** 18).toFixed(2, 1);\r\n      }\r\n    });\r\n    if (data.address) {\r\n      data.getBalance();\r\n    }\r\n    watch(\r\n      () => data.address,\r\n      val => {\r\n        if (val) {\r\n          data.getBalance();\r\n        }\r\n      }\r\n    );\r\n    const refData = toRefs(data);\r\n    return {\r\n      ...refData\r\n    };\r\n  }\r\n};\r\n</script>\r\n","import { render } from \"./WalletContract.vue?vue&type=template&id=538e60f7\"\nimport script from \"./WalletContract.vue?vue&type=script&lang=js\"\nexport * from \"./WalletContract.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\contract\\\\vue\\\\mafaai\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"topbg-wrapper\">\r\n    <div class=\"top-bg\">\r\n      <div class=\"common-page--menu\">\r\n        <div class=\"link link-white\" @click=\"$router.push({ name: 'Index' })\">\r\n          {{$t(\"首頁\")}}&nbsp;>&nbsp;\r\n        </div>\r\n        <div class=\"link link-white\" @click=\"$router.replace({ name: 'MiningLp', query: { type: '1' } })\" v-if=\"type == 1\">\r\n          {{ $t(\"LP挖礦\") }}&nbsp;>&nbsp;\r\n        </div>\r\n        <div class=\"link link-white\" @click=\"$router.replace({ name: 'MiningLp', query: { type: '2' } })\" v-else>\r\n          {{ $t(\"單幣挖礦\") }}&nbsp;>&nbsp;\r\n        </div>\r\n        <div class=\"link\">{{$t(\"質押\")}}</div>\r\n      </div>\r\n      <div class=\"top-header flex-middle\">\r\n        <div class=\"header-between flex-item\"></div>\r\n        <div class=\"header-center\">\r\n          {{ $t(\"質押\") }} {{ type === \"1\" ? `${name} LP` : name }}\r\n        </div>\r\n        <wallet-contract></wallet-contract>\r\n      </div>\r\n    </div>\r\n    <!-- LP -->\r\n    <el-form class=\"from-box\">\r\n      <div class=\"input-suffix flex-between\">\r\n        <span class=\"input-label\"\r\n          >{{ $t(\"已質押type數量：\", {type: type === \"1\" ? \"LP\" : name}) }}</span\r\n        >\r\n        <span class=\"input-value\">\r\n          <span class=\"primary-color\">\r\n            {{\r\n              LPInfo.balances && LPInfo.tokenDecimals\r\n                ? new BigNumber(LPInfo.balances)\r\n                    .dividedBy(Math.pow(10, LPInfo.tokenDecimals))\r\n                    .toFixed(6, 1)\r\n                : \"--\"\r\n            }}\r\n          </span>\r\n          <span class=\"ml\">{{ type === \"1\" ? \"LP\" : name }}</span>\r\n        </span>\r\n      </div>\r\n      <div class=\"input-suffix flex-between\">\r\n        <span class=\"input-label\"\r\n          >{{ $t(\"可質押type數量：\", {type: type === \"1\" ? \"LP\" : name}) }}</span\r\n        >\r\n        <span class=\"input-value\">\r\n          <span class=\"primary-color\">\r\n            {{ LPInfo.tokenBalance ? LPInfo.tokenBalance : \"--\" }}\r\n          </span>\r\n          <span class=\"ml\">{{ type === \"1\" ? \"LP\" : name }}</span>\r\n        </span>\r\n      </div>\r\n      <div class=\"input-suffix flex-between\">\r\n        <span class=\"input-label\"\r\n          >{{ $t(\"質押type數量：\", {type: type === \"1\" ? \"LP\" : name}) }}</span\r\n        >\r\n        <el-input\r\n          :placeholder=\"$t('請輸入質押數量')\"\r\n          class=\"flex\"\r\n          v-model=\"amount\"\r\n        >\r\n          <template #suffix>\r\n            <span class=\"suffix-span\">{{ type === \"1\" ? \"LP\" : name }}</span>\r\n          </template>\r\n          <template #append>\r\n            <span class=\"primary-color\" @click=\"amount = LPInfo.tokenBalance\">{{\r\n              $t(\"全部\")\r\n            }}</span>\r\n          </template>\r\n        </el-input>\r\n      </div>\r\n\r\n      <div class=\"form-btn\">\r\n        <el-button\r\n          v-if=\"!address\"\r\n          type=\"primary\"\r\n          block\r\n          round\r\n          @click=\"initWallet\"\r\n          >{{ $t(\"鏈接錢包\") }}</el-button\r\n        >\r\n        <el-button\r\n          v-else-if=\"\r\n            BigNumber(amount).gt(0) &&\r\n              (!LPInfo.tokenAllowance ||\r\n                BigNumber(LPInfo.tokenAllowance).lte(0) ||\r\n                BigNumber(LPInfo.tokenAllowance).lt(\r\n                  BigNumber(amount)\r\n                    .multipliedBy(Math.pow(10, LPInfo.tokenDecimals))\r\n                    .toFixed()\r\n                ))\r\n          \"\r\n          type=\"primary\"\r\n          block\r\n          round\r\n          :disabled=\"loading\"\r\n          :loading=\"loading\"\r\n          @click=\"approve\"\r\n          >{{ $t(\"授權\") }}</el-button\r\n        >\r\n        <el-button\r\n          v-else\r\n          type=\"primary\"\r\n          block\r\n          round\r\n          :disabled=\"loading\"\r\n          :loading=\"loading\"\r\n          @click=\"toStake\"\r\n          >{{ $t(\"質押\") }}</el-button\r\n        >\r\n      </div>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs, computed, watch } from \"vue\";\r\nimport WalletContract from \"@/components/WalletContract\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport LPStake from \"@/utils/LPStake\";\r\nimport { config } from \"@/utils/config\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport tokenAbi from \"@/utils/abi\";\r\nimport web3Data from \"@/utils/initWeb3\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { MaxUint256 } from \"@ethersproject/constants\";\r\nimport { useI18n } from \"vue-i18n\";\r\nexport default {\r\n  components: {\r\n    WalletContract\r\n  },\r\n  setup() {\r\n    const store = useStore();\r\n    const route = useRoute();\r\n    const { t } = useI18n();\r\n    const data = reactive({\r\n      BigNumber: BigNumber,\r\n      type: route.params.type,\r\n      name: route.params.name,\r\n      tokenAddress: route.params.token,\r\n      web3: computed(() => store.state.provider),\r\n      address: computed(() => store.state.accounts[0]),\r\n      LPStakeContract: null,\r\n      tokenContract: null,\r\n      LPInfo: {},\r\n      amount: \"\",\r\n      loading: false,\r\n      initWallet: () => {\r\n        if (!data.address) {\r\n          web3Data.initWeb3();\r\n        }\r\n      },\r\n      initContract: () => {\r\n        data.LPStakeContract = new data.web3.eth.Contract(\r\n          LPStake,\r\n          config.LPStake\r\n        );\r\n        data.tokenContract = new data.web3.eth.Contract(\r\n          tokenAbi,\r\n          data.tokenAddress\r\n        );\r\n        data.initData();\r\n      },\r\n      initData: () => {\r\n        data.getInfo();\r\n        data.getBalance();\r\n        data.getAllowance();\r\n      },\r\n      getAllowance: async () => {\r\n        data.LPInfo.tokenAllowance = await data.tokenContract.methods\r\n          .allowance(data.address, config.LPStake)\r\n          .call();\r\n        console.log(data.LPInfo.tokenAllowance);\r\n      },\r\n      approve: () => {\r\n        data.loading = true;\r\n        data.tokenContract.methods\r\n          .approve(config.LPStake, MaxUint256)\r\n          .send({ from: data.address })\r\n          .then(result => {\r\n            data.loading = false;\r\n            data.getAllowance();\r\n          })\r\n          .catch(() => {\r\n            data.loading = false;\r\n          });\r\n      },\r\n      getBalance: async () => {\r\n        let tokenBalance = await data.tokenContract.methods\r\n          .balanceOf(data.address)\r\n          .call();\r\n        let decimals = await data.tokenContract.methods.decimals().call();\r\n        data.LPInfo.tokenDecimals = decimals;\r\n        data.LPInfo.tokenBalanceDecimals = tokenBalance;\r\n        data.LPInfo.tokenBalance = new BigNumber(tokenBalance)\r\n          .dividedBy(Math.pow(10, decimals))\r\n          .toFixed(6, 1);\r\n      },\r\n      getInfo: async () => {\r\n        let result = await data.LPStakeContract.methods\r\n          .userInfo(data.address, data.tokenAddress)\r\n          .call();\r\n        data.LPInfo.balances = result.balances; // 已質押\r\n      },\r\n      toStake: () => {\r\n        if (!data.amount || new BigNumber(data.amount).lte(0)) {\r\n          ElMessage.error(t(\"請輸入質押數量\"));\r\n          return;\r\n        }\r\n        if (new BigNumber(data.amount).gt(data.LPInfo.tokenBalance)) {\r\n          ElMessage.error(t(\"數量不足\"));\r\n          return;\r\n        }\r\n        let amount = new BigNumber(data.amount)\r\n          .multipliedBy(Math.pow(10, data.LPInfo.tokenDecimals))\r\n          .toFixed();\r\n        data.loading = true;\r\n        console.log(data.tokenAddress, amount);\r\n        data.LPStakeContract.methods\r\n          .stake(data.tokenAddress, amount)\r\n          .estimateGas({ from: data.address })\r\n          .then(gas => {\r\n            console.log(\"gas\", gas);\r\n            data.LPStakeContract.methods\r\n              .stake(data.tokenAddress, amount)\r\n              .send({ from: data.address, gas: gas })\r\n              .then(() => {\r\n                data.loading = false;\r\n                data.initData();\r\n              })\r\n              .catch(() => {\r\n                data.loading = false;\r\n              });\r\n          })\r\n          .catch(err => {\r\n            data.loading = false;\r\n            console.log(err);\r\n          });\r\n      }\r\n    });\r\n    if (data.address) {\r\n      data.initContract();\r\n    }\r\n    watch(\r\n      () => data.address,\r\n      val => {\r\n        if (val) {\r\n          data.initContract();\r\n        }\r\n      }\r\n    );\r\n    const refData = toRefs(data);\r\n    return {\r\n      ...refData\r\n    };\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.address-list {\r\n  max-width: 1400px;\r\n  margin: 30px auto 80px;\r\n}\r\n.bottom-table {\r\n  background: #fff;\r\n  border-radius: 20px;\r\n  margin-top: 50px;\r\n  .table-box {\r\n    max-width: 1400px;\r\n    margin: 0 auto;\r\n  }\r\n}\r\n@media screen and (max-width: 480px) {\r\n  /deep/ .suffix-span {\r\n    padding: 0 6px 0 0 !important;\r\n    font-size: 15px !important;\r\n    border-right: 1px solid #d4d4d4;\r\n    margin-right: -6px;\r\n  }\r\n  /deep/ .from-box .el-input__inner {\r\n    // width: 150px !important;\r\n    font-size: 14px !important;\r\n    padding-right: 35px !important;\r\n    background: #eff2f7;\r\n    border: 0;\r\n  }\r\n  /deep/ .el-input-group__append,\r\n  .el-input-group__prepend {\r\n    padding: 0 7px 0 5px;\r\n  }\r\n  /deep/ .el-input__suffix {\r\n    transform: translate(-39px, -12px) !important;\r\n  }\r\n  /deep/ .from-box .input-suffix .suffix-span {\r\n  }\r\n  /deep/ .from-box .input-suffix .input-label {\r\n    margin-right: 0;\r\n  }\r\n  /deep/ .from-box {\r\n    margin-top: -150px;\r\n  }\r\n  /deep/ .el-input--suffix .el-input__inner {\r\n    padding-right: 45px;\r\n  }\r\n  .from-box {\r\n    padding: 0 15px;\r\n  }\r\n  /deep/ .el-input-group__append,\r\n  .el-input-group__prepend {\r\n    background: #eff2f7;\r\n    border: 0;\r\n  }\r\n  /deep/ .el-input-group {\r\n    background: #eff2f7;\r\n    border-radius: 6px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=02e2a17c&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=02e2a17c&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\contract\\\\vue\\\\mafaai\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-02e2a17c\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=02e2a17c&lang=scss&scoped=true\""],"sourceRoot":""}